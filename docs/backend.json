{
  "entities": {
    "Article": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Article",
      "type": "object",
      "description": "Represents a news article in the Bilingual News Hub.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Article entity."
        },
        "titleEnglish": {
          "type": "string",
          "description": "Title of the article in English."
        },
        "titleGujarati": {
          "type": "string",
          "description": "Title of the article in Gujarati."
        },
        "contentEnglish": {
          "type": "string",
          "description": "Content of the article in English."
        },
        "contentGujarati": {
          "type": "string",
          "description": "Content of the article in Gujarati."
        },
        "authorId": {
          "type": "string",
          "description": "Reference to the Author who wrote the article. (Relationship: Author 1:N Article)"
        },
        "publicationDate": {
          "type": "string",
          "description": "Date and time the article was published.",
          "format": "date-time"
        },
        "imageUrl": {
          "type": "string",
          "description": "URL of the article's main image."
        },
        "category": {
          "type": "string",
          "description": "Category of the article (e.g., Politics, Sports)."
        },
        "tags": {
          "type": "array",
          "description": "List of tags associated with the article.",
          "items": {
            "type": "string"
          }
        }
      },
      "required": [
        "id",
        "titleEnglish",
        "titleGujarati",
        "contentEnglish",
        "contentGujarati",
        "authorId",
        "publicationDate"
      ]
    },
    "Author": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Author",
      "type": "object",
      "description": "Represents an author or reporter.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Author entity."
        },
        "firstName": {
          "type": "string",
          "description": "First name of the author."
        },
        "lastName": {
          "type": "string",
          "description": "Last name of the author."
        },
        "email": {
          "type": "string",
          "description": "Email address of the author.",
          "format": "email"
        },
        "bio": {
          "type": "string",
          "description": "Short biography of the author."
        },
        "profilePictureUrl": {
          "type": "string",
          "description": "URL of the author's profile picture."
        },
        "qrCodeUrl": {
          "type": "string",
          "description": "URL of the author's unique QR code."
        },
        "verified": {
          "type": "boolean",
          "description": "Indicates if the author's authenticity is verified."
        }
      },
      "required": [
        "id",
        "firstName",
        "lastName",
        "email"
      ]
    },
    "UserProfile": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "UserProfile",
      "type": "object",
      "description": "Represents a user profile.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the UserProfile entity."
        },
        "firstName": {
          "type": "string",
          "description": "First name of the user."
        },
        "lastName": {
          "type": "string",
          "description": "Last name of the user."
        },
        "email": {
          "type": "string",
          "description": "Email address of the user.",
          "format": "email"
        },
        "phoneNumber": {
          "type": "string",
          "description": "Phone number of the user."
        },
        "address": {
          "type": "string",
          "description": "Address of the user."
        },
        "themePreference": {
          "type": "string",
          "description": "User's preferred theme (light, dark, system default)."
        },
        "role": {
          "type": "string",
          "description": "The user's role in the system.",
          "enum": [
            "member",
            "reporter",
            "director",
            "editor"
          ],
          "default": "member"
        }
      },
      "required": [
        "id",
        "firstName",
        "lastName",
        "email",
        "role"
      ]
    },
    "Role": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Role",
      "type": "object",
      "description": "Represents a user's role for authorization purposes.",
      "properties": {
        "role": {
          "type": "string",
          "description": "The user's role in the system.",
          "enum": [
            "member",
            "reporter",
            "director",
            "editor"
          ]
        }
      },
      "required": ["role"]
    },
    "Donation": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Donation",
      "type": "object",
      "description": "Represents a donation made by a user.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Donation entity."
        },
        "userId": {
          "type": "string",
          "description": "Reference to the UserProfile who made the donation. (Relationship: UserProfile 1:N Donation)"
        },
        "amount": {
          "type": "number",
          "description": "Amount of the donation."
        },
        "currency": {
          "type": "string",
          "description": "Currency of the donation (e.g., USD, INR)."
        },
        "donationDate": {
          "type": "string",
          "description": "Date and time the donation was made.",
          "format": "date-time"
        },
        "paymentGateway": {
          "type": "string",
          "description": "Payment gateway used for the donation (e.g., Razorpay, Stripe, PayPal)."
        },
        "isRecurring": {
          "type": "boolean",
          "description": "Indicates if the donation is recurring."
        }
      },
      "required": [
        "id",
        "userId",
        "amount",
        "currency",
        "donationDate",
        "paymentGateway"
      ]
    }
  },
  "auth": {
    "providers": [
      "google",
      "password"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "UserProfile",
          "schema": {
            "$ref": "#/backend/entities/UserProfile"
          },
          "description": "Stores user profile information. Accessible only by the authenticated user. Includes 'userId' as the document ID.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier for the user, matching the Firebase Auth UID."
            }
          ]
        }
      },
      {
        "path": "/roles/{userId}",
        "definition": {
          "entityName": "Role",
          "schema": {
            "$ref": "#/backend/entities/Role"
          },
          "description": "Stores user roles for authorization. Accessible only by admins.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier for the user, matching the Firebase Auth UID."
            }
          ]
        }
      },
      {
        "path": "/authors/{authorId}",
        "definition": {
          "entityName": "Author",
          "schema": {
            "$ref": "#/backend/entities/Author"
          },
          "description": "Stores author profiles. The owner can create and manage authors. Includes 'authorId' as the document ID.",
          "params": [
            {
              "name": "authorId",
              "description": "The unique identifier for the author."
            }
          ]
        }
      },
      {
        "path": "/articles/{articleId}",
        "definition": {
          "entityName": "Article",
          "schema": {
            "$ref": "#/backend/entities/Article"
          },
          "description": "Stores articles. Includes denormalized 'authorId' for authorization independence. The owner can create, read, update, and delete articles. Users can read articles.",
          "params": [
            {
              "name": "articleId",
              "description": "The unique identifier for the article."
            }
          ]
        }
      },
      {
        "path": "/donations/{donationId}",
        "definition": {
          "entityName": "Donation",
          "schema": {
            "$ref": "#/backend/entities/Donation"
          },
          "description": "Stores donation information. Includes 'userId' to track the donating user. Only the user and the owner can access.",
          "params": [
            {
              "name": "donationId",
              "description": "The unique identifier for the donation."
            }
          ]
        }
      }
    ],
    "reasoning": "The Firestore structure is designed to ensure security, scalability, and debuggability. User profiles are separate from role data to allow for secure role-based access control without circular dependencies in security rules. The 'roles' collection is used specifically for authorization checks in security rules, while the 'users' collection stores public and private user data."
  }
}

    