
{
  "entities": {
    "Article": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Article",
      "type": "object",
      "description": "Represents a news article in the Bilingual News Hub.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Article entity."
        },
        "titleEnglish": {
          "type": "string",
          "description": "Title of the article in English."
        },
        "titleGujarati": {
          "type": "string",
          "description": "Title of the article in Gujarati."
        },
        "contentEnglish": {
          "type": "string",
          "description": "Content of the article in English."
        },
        "contentGujarati": {
          "type": "string",
          "description": "Content of the article in Gujarati."
        },
        "excerptEnglish": {
            "type": "string",
            "description": "A short summary of the article in English."
        },
        "excerptGujarati": {
            "type": "string",
            "description": "A short summary of the article in Gujarati."
        },
        "authorId": {
          "type": "string",
          "description": "Reference to the Author who wrote the article. (Relationship: Author 1:N Article)"
        },
        "publicationDate": {
          "type": "string",
          "description": "Date and time the article was published.",
          "format": "date-time"
        },
        "imageUrl": {
          "type": "string",
          "description": "URL of the article's main image."
        },
        "category": {
          "type": "string",
          "description": "Category of the article (e.g., Politics, Sports)."
        },
        "tags": {
          "type": "array",
          "description": "List of tags associated with the article.",
          "items": {
            "type": "string"
          }
        }
      },
      "required": [
        "id",
        "titleEnglish",
        "titleGujarati",
        "contentEnglish",
        "contentGujarati",
        "authorId",
        "publicationDate"
      ]
    },
    "Author": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Author",
      "type": "object",
      "description": "Represents an author or reporter.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Author entity."
        },
        "firstName": {
          "type": "string",
          "description": "First name of the author."
        },
        "lastName": {
          "type": "string",
          "description": "Last name of the author."
        },
        "email": {
          "type": "string",
          "description": "Email address of the author.",
          "format": "email"
        },
        "bio": {
          "type": "string",
          "description": "Short biography of the author."
        },
        "profilePictureUrl": {
          "type": "string",
          "description": "URL of the author's profile picture."
        },
        "qrCodeUrl": {
          "type": "string",
          "description": "URL of the author's unique QR code."
        },
        "verified": {
          "type": "boolean",
          "description": "Indicates if the author's authenticity is verified."
        }
      },
      "required": [
        "id",
        "firstName",
        "lastName",
        "email"
      ]
    },
    "UserProfile": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "UserProfile",
      "type": "object",
      "description": "Represents a user profile.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the UserProfile entity."
        },
        "firstName": {
          "type": "string",
          "description": "First name of the user."
        },
        "lastName": {
          "type": "string",
          "description": "Last name of the user."
        },
        "email": {
          "type": "string",
          "description": "Email address of the user.",
          "format": "email"
        },
        "phoneNumber": {
          "type": "string",
          "description": "Phone number of the user."
        },
        "address": {
          "type": "string",
          "description": "Address of the user."
        },
        "themePreference": {
          "type": "string",
          "description": "User's preferred theme (light, dark, system default)."
        },
        "role": {
          "type": "string",
          "description": "The user's role in the system.",
          "enum": [
            "member",
            "reporter",
            "editor",
            "director"
          ],
          "default": "member"
        }
      },
      "required": [
        "id",
        "firstName",
        "lastName",
        "email",
        "role"
      ]
    },
    "Donation": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Donation",
      "type": "object",
      "description": "Represents a donation made by a user.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Donation entity."
        },
        "userId": {
          "type": "string",
          "description": "Reference to the UserProfile who made the donation. (Relationship: UserProfile 1:N Donation)"
        },
        "amount": {
          "type": "number",
          "description": "Amount of the donation."
        },
        "currency": {
          "type": "string",
          "description": "Currency of the donation (e.g., USD, INR)."
        },
        "donationDate": {
          "type": "string",
          "description": "Date and time the donation was made.",
          "format": "date-time"
        },
        "paymentGateway": {
          "type": "string",
          "description": "Payment gateway used for the donation (e.g., Razorpay, Stripe, PayPal)."
        },
        "isRecurring": {
          "type": "boolean",
          "description": "Indicates if the donation is recurring."
        }
      },
      "required": [
        "id",
        "userId",
        "amount",
        "currency",
        "donationDate",
        "paymentGateway"
      ]
    },
    "Role": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Role",
      "type": "object",
      "description": "A document that stores the role of a user, used for role-based access control.",
      "properties": {
        "role": {
          "type": "string",
          "description": "The role of the user.",
          "enum": [
            "member",
            "reporter",
            "editor",
            "director"
          ]
        }
      },
      "required": [
        "role"
      ]
    },
    "Advertisement": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "title": "Advertisement",
        "type": "object",
        "description": "Represents a single advertisement to be displayed on the site.",
        "properties": {
            "id": {
                "type": "string",
                "description": "Unique identifier for the Advertisement entity."
            },
            "name": {
                "type": "string",
                "description": "An internal name for the ad for easy identification."
            },
            "type": {
                "type": "string",
                "description": "The type of advertisement.",
                "enum": ["image", "html"]
            },
            "url": {
                "type": "string",
                "description": "The URL for the ad source (used for image types)."
            },
            "htmlCode": {
                "type": "string",
                "description": "The raw HTML code for the ad (used for html types)."
            }
        },
        "required": ["id", "name", "type"]
    }
  },
  "auth": {
    "providers": [
      "google",
      "password"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "UserProfile",
          "schema": {
            "$ref": "#/backend/entities/UserProfile"
          },
          "description": "Stores user profile information. Accessible by the authenticated user and fully by admins.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier for the user, matching the Firebase Auth UID."
            }
          ]
        }
      },
      {
        "path": "/roles/{uid}",
        "definition": {
          "entityName": "Role",
          "schema": {
            "$ref": "#/backend/entities/Role"
          },
          "description": "A collection where a document with a user's UID stores their role. This is checked in security rules to determine admin permissions. Only admins can modify this collection.",
          "params": [
            {
              "name": "uid",
              "description": "The user's UID. The document contains the user's role."
            }
          ]
        }
      },
      {
        "path": "/authors/{authorId}",
        "definition": {
          "entityName": "Author",
          "schema": {
            "$ref": "#/backend/entities/Author"
          },
          "description": "Stores public author profiles. Admins can create and manage authors.",
          "params": [
            {
              "name": "authorId",
              "description": "The unique identifier for the author."
            }
          ]
        }
      },
      {
        "path": "/articles/{articleId}",
        "definition": {
          "entityName": "Article",
          "schema": {
            "$ref": "#/backend/entities/Article"
          },
          "description": "Stores articles. Publicly readable, but only manageable by admins.",
          "params": [
            {
              "name": "articleId",
              "description": "The unique identifier for the article."
            }
          ]
        }
      },
      {
        "path": "/donations/{donationId}",
        "definition": {
          "entityName": "Donation",
          "schema": {
            "$ref": "#/backend/entities/Donation"
          },
          "description": "Stores donation information. Accessible by the donating user and fully by admins.",
          "params": [
            {
              "name": "donationId",
              "description": "The unique identifier for the donation."
            }
          ]
        }
      },
      {
        "path": "/advertisements/{advertisementId}",
        "definition": {
          "entityName": "Advertisement",
          "schema": {
            "$ref": "#/backend/entities/Advertisement"
          },
          "description": "Stores advertisement configuration. Publicly readable, admin-only write access.",
          "params": [
            {
              "name": "advertisementId",
              "description": "The unique identifier for the advertisement."
            }
          ]
        }
      }
    ],
    "reasoning": "The Firestore structure is designed for secure, role-based access. The `/roles` collection is critical for securely identifying admin users ('directors'), which is checked in security rules to grant elevated permissions across other collections like `/users`. This separation of user data and roles is a key security pattern."
  }
}
